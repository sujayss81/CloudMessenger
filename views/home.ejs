<!doctype html>
<html>
	<head>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<link rel="stylesheet" href="stylesheets/home.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
	</head>
	<script>
		window.setInterval(function(){
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				var a = JSON.parse(this.responseText);
				document.getElementById('ousers').innerHTML = 
					""
					;
				document.getElementById('ousers').innerHTML += 
					"<option value='nos'>--</option>"
					;
				for(i=0;i<a.length;i++){
					if(a[i]._id == "<%=cuser %>"){
						continue;
					}
					document.getElementById('ousers').innerHTML += 
					"<option value='"+a[i]._id+"'>"+a[i].name+"</option>"
					;
				}	
			}
			};
			xhttp.open("GET", "/online", true);
			xhttp.send();
		}, 1000);
	</script>
	<body>
		<h1>Hello <%=name %></h1>
		<a href="/logout/<%=id %>">Logout</a>
		<div class="form1">
			<form method="POST" action="/chat">
				<label>Choose Online Users from the list below</label>
				<input type="hidden" value="<%=id %>" name="sender">
				<select name="receiver" class="form-control" id="ousers">
					<!-- <option value="nos">--</option> -->
					<!-- <% ousers.forEach(function(res) { %>
						<% if(!id.equals(res._id)) { %>
							<option value="<%=res._id %>"><%= res.name %></option>
						<%}%>
					<% }); %> -->
				</select>
				<input type="submit" class="btn btn-primary" value="Start Messaging">
			</form>
		</div>
		








	<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
	</body>
</html>

	